---
const navLinks = [
  { href: "/", text: "Home" },
  { href: "/services", text: "Services" },
  { href: "/packages", text: "Packages" },
  { href: "/cost-estimator", text: "Cost Estimator" },
  { href: "/contact", text: "Contact Us" },
];

const currentPath = Astro.url.pathname;
---
<script type="module">
  import Alpine from 'alpinejs';
  window.Alpine = Alpine;
  Alpine.start();
</script>

<header class="bg-white shadow sticky top-0 z-50" x-data="{ open: false }">
  <div class="container mx-auto flex items-center justify-between px-4 py-3">
    <!-- Logo -->
    <a href="/" aria-label="Structo Builders Home">
      <img src="/structologo.png" alt="Structo Builders Logo" class="h-10 w-auto" />
    </a>

    <!-- Mobile Hamburger -->
    <button
      @click="open = !open"
      aria-label="Toggle Menu"
      aria-controls="mobile-menu"
      :aria-expanded="open.toString()"
      class="text-gray-700 focus:outline-none md:hidden"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center space-x-8">
      {navLinks.map(link => (
        <a 
          href={link.href} 
          class={`text-sm ${link.href === currentPath ? 'text-orange-500' : 'text-gray-700 hover:text-orange-500'}`}
          aria-current={link.href === currentPath ? "page" : false}
        >
          {link.text}
        </a>
      ))}

      <!-- Let's Build Button -->
      <a href="/contact" class="ml-4 px-4 py-2 bg-orange-600 text-white text-sm rounded hover:bg-orange-700 transition">
        Let's Build
      </a>
    </nav>
  </div>

  <!-- Mobile Dropdown Nav -->
  <div 
    id="mobile-menu"
    x-show="open" 
    x-transition
    @click.away="open = false"
    class="md:hidden bg-white shadow-lg"
  >
    <div class="space-y-2 px-4 py-3">
      {navLinks.map(link => (
        <a 
          href={link.href} 
          class:list={[
            "block text-gray-700 hover:text-blue-600 font-medium",
            { "text-blue-600": link.href === currentPath }
          ]}
          aria-current={link.href === currentPath ? "page" : false}
        >
          {link.text}
        </a>
      ))}

      <!-- Mobile Let's Build Button -->
      <a href="/contact" class="block w-full text-center mt-3 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 transition">
        Let's Build
      </a>
    </div>
  </div>
</header>
